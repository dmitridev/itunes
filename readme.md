### Itunes
Простой аналог музыкального сервиса.
Пользователи могут добавлять артистов, альбомы, песни и плейлисты из песен. 
Для примера уже реализован CRUD (добавление, редактирование, обновление и удаление) для
пользователей и плейлистов. 

### Тестовое задание
- Реализовать CRUD для моделей артистов, альбомов и песен.
- Реализовать возможность добавлять песни в плейлисты. 
- При удалении учитывать каскадное удаление зависимых ресурсов (при этом не удалять плейлисты)

Модели должны содержать следующие поля:

##### Артист:
- Первичный ключ
- Название
- Список альбомов (связь @ManyToOne)

##### Альбом
- Первичный ключ
- Название
- Дата релиза (число)
- Жанр (строка)
- Артист (связь @OneToMany)
- Список песен (связь @ManyToOne)

##### Песня
- Первичный ключ
- Название
- Длительность (число в секундах)
- Альбом (связь @OneToMany)
- Приглашенные артисты (связь Many-To-Many)

Реализация CRUD представляет собой собой REST API, 
который оформлен согласно общепринятым стандартам.  

### Установка и запуск
- IntelliJ IDEA - https://www.jetbrains.com/ru-ru/idea/
- JDK 8 - https://www.malavida.com/ru/soft/java-jdk/download

После установки JDK убедитесь, что переменная окружения 
JAVA_HOME указывает на верную директорию. 

В случае ошибок также убедитесь, что IDEA использует JDK именно версии 8, 
а не собственную 11.

В приложении используется встроенная база данных H2, 
так что подключать ничего не нужно. Файл генерируется в директории ``out``

### Структура проекта
```
├───src
|    └───main
|        ├───java/org/astelit/itunes       
|        │   ├───configuration
|        │   ├───controller
|        │   ├───dto
|        │   ├───entity
|        │   ├───enums
|        │   ├───exception
|        │   ├───repository
|        │   ├───service
|        │   └───utils
|        │
|        └───resources
|            │   application.yaml
|            │   log4j2.yaml
|            │
|            └───db
|                │   changelog.yaml
|                └───include
|
│   build.gradle
│   gradlew
│   gradlew.bat
│   readme.md
│   settings.gradle
```

Общая структура

| название       | описание                                                                                                                                                                                                                              |
|---------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| build.gradle | Скрипт сборки проекта. В нем указываются зависимости, подключаются плагины для дополнительных задач.
| gradlew       | CLI для gradle. Используйте ``gradlew bootRun`` для запуска проекта.
| src/main/java/org/astelit/itunes/| Директория исходного кода|
| src/main/resources|Ресурсы приложения|
| src/main/resources/db|Миграции для базы данных|
| src/main/resources/application.yaml|Конфигурация приложения|
| src/main/resources/log4j2.yaml|Конфигурация логгера приложения|

Структура пакетов приложения

| Пакет         | Описание                                                                                                                                                                                                                              |
|---------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| configuration | Пакет конфигурационных классов, которые считывает Spring при старте приложения                                                                                                                                                               |
| controller    | Пакет для контроллеров приложения<br>https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-controller                                                                                                                                                                                                        |
| dto           | Пакет для классов, описывающих данные для запросов/ответов приложения.                                                                                                                                                                                      |
| entity        | Пакет для классов, которые описывают таблицы базы данных. <br>http://java-online.ru/hibernate-entities.xhtml                                                                                            |
| exceptions    | Пакет для эксепшенов, которые стоит кидать если нужно вернуть ошибку для клиента.                                                                                                                                                                |
| repository    | Пакет для интерфейсов, которые предоставляют набор методов для работы с бд. Spring автоматически реализует эти интерфейсы при старте приложения.<br>https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.core-concepts |
| service       | Пакет бизнесс-логики приложения. Производите все операции с данными в классах этого пакета.                                                                                                                                      |

### Цепочка зависимостей пакетов внутри приложения
controller <-> dto <-> service <-> entity <-> repository

### Полезные ссылки
- https://www.baeldung.com/persistence-with-spring-series
- https://www.baeldung.com/rest-with-spring-series
- https://www.liquibase.org/documentation/changes

### Советы
Используйте следующие методы для работы с ресурсами:
- POST - добавление объектов 
- PATCH - обновление объектов 
- GET - получение информации
- DELETE - удаление ресурса

Не возвращайте и не принимайте entity-классы в контроллерах:
- вы получите ошибку при попытке сохранить такой класс в базу данных
- это приведет к рекурсивной загрузке всех LAZY полей в момент сериализации объекта в JSON и последующим ошибкам.
  
Используйте классы из пакета dto для работы с контроллерами.  
